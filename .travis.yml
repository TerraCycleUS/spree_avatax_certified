sudo: false
language: ruby
rvm:
  - 2.5.1
  - 2.4.2
  - 2.3.1

script:
  - bundle exec rake test_app
  - bundle exec rake spec

before_install:
  - mysql -u root -e "GRANT ALL ON *.* TO 'travis'@'%';"

env:
  matrix:
    - SPREE_BRANCH=3-3-stable DB=postgres
    - SPREE_BRANCH=3-4-stable DB=postgres
    - SPREE_BRANCH=3-5-stable DB=postgres
    - SPREE_BRANCH=3-6-stable DB=postgres
    - SPREE_BRANCH=3-7-stable DB=postgres
    - SPREE_BRANCH=master DB=postgres
    - SPREE_BRANCH=3-3-stable DB=mysql
    - SPREE_BRANCH=3-4-stable DB=mysql
    - SPREE_BRANCH=3-5-stable DB=mysql
    - SPREE_BRANCH=3-6-stable DB=mysql
    - SPREE_BRANCH=3-7-stable DB=mysql
    - SPREE_BRANCH=master DB=mysql
